#!/usr/bin/env bash

debug=(-v 2)

header="wlr/backend.h"

c_flags=(
    # Enable unstable features of Wlroots.
    --clang-option -DWLR_USE_UNSTABLE
)

select_flags=(
    --select-by-header-path "${header}"
    --enable-program-slicing
)

module_flags=(
    --unique-id com.hs-bindgen.wlroots
    --overwrite-files
)

hs-bindgen-cli info include-graph "${header}" \
    "${debug[@]}" \
    "${c_flags[@]}" \
    "${select_flags[@]}" \
    "${module_flags[@]}" \
    -o include-graph-backend.mermaid

hs-bindgen-cli info include-graph "${header}" \
    "${debug[@]}" \
    "${c_flags[@]}" \
    "${select_flags[@]}" \
    "${module_flags[@]}" \
    --parse-all \
    -o include-graph-all.mermaid
